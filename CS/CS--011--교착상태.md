# 교착상태
- 교착상태(Deadlock)란 두 개 이상의 프로세스가 자원을 점유한 상태에서 서로 다른 프로세스가 점유하고 있는 자원을 요구하며, 서로의 작업을 끝나기만을 기다리며 둘 다 영원히 끝나지 않는 상황을 의미한다.
---
### 교착상태의 발생 조건 4가지
교착 상태는 아래의 4가지 조건이 모두 만족되는 경우에 발생할 가능성이 있으며, 하나라도 만족하지 않으면 교착상태가 발생하지 않는다.
- 상호 배제(Mutual Exclusion) : 한 번에 한 개의 프로세스만이 공유자원을 사용할 수 있음
- 점유 대기(Hold and Wait) : 프로세스가 할당된 자원을 가진 상태에서 다른 자원을 기다림
- 비선점(No Preemption) : 프로세스가 작업을 마친 후 자원을 자발적으로 반환할 때까지 기다림(이미 할당된 자원을 강제로 빼앗을 수 없음)
- 순환 대기(Circular Wait) : 프로세스의 자원 점유 및 점유된 자원의 요구 관계가 원형을 이루면서 대기하는 조건. 각 프로세스는 순환적으로 다음 프로세스가 요구하는 자원을 가지고 있음
---
### 교착상태 해결방법
#### 1. 예방(Prevention) : 교착상태 예방 방법은 교착상태가 애초에 일어나지 않도록 방지하는 방법으로 교착상태의 발생조건 4가지 중 하나를 부정함으로써 교착상태를 예방하는 방법이다.
- 상호 배제 부정 : 여러 개의 프로세스가 동시에 공유자원을 사용할 수 없음
- 점유 대기 부정 : 프로세스가 실행되기 전에 필요한 모든 자원을 할당하여 프로세스 대기를 없애거나, 자원이 점유되지 않은 상태에서만 자원 요청을 받도록 함
- 비선점 부정 : 모든 자원에 대한 선점을 허용
- 순환 대기 부정 : 자원을 선형으로 분류하여 고유 번호를 할당하고, 각 프로세스는 현재 점유한 자원의 고유번호보다 앞이나 뒤 한쪽 방향으로만 자원을 요구하도록 함
---
#### 2. 회피(Avoidance) : 교착상태가 발생할 가능성이 있는 자원 할당을 하지 않고, 안전한 상태에서만 자원요청을 허용하는 방법이다. 하지만 교착상태 회피를 하기 위해서는 다음과 같은 가정이 필요하다.
- 프로세스 수 고정
- 자원의 종류와 수 고정
- 프로세스가 요구하는 최대 자원의 수를 알아야 함
- 프로세스는 자원 사용 후 반드시 반납

교착상태를 회피하기 위한 알고리즘으로는 크게 두 가지가 있다.
1. 은행원 알고리즘(Banker's Algorithm) : CPU는 최소한 하나의 프로세스에게 할당해줄 만큼의 자원을 항상 보유하고 있어야 한다.
2. 자원 할당 그래프 알고리즘(Resource-Allocation Graph Algorithm) : 자원 할당 그래프에 예약 간선을 추가하여 예약 간선으로 설정한 자원에 대해서만 자원 할당을 요청할 수 있고, 사이클이 형성되지 않을 때만 자원을 할당받는 방법
---
출처 : https://cocoon1787.tistory.com/858
